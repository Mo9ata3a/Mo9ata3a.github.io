import{j as e,r as i,d as h,H as f,M as g,F as b,b as j}from"./index-gfiqoO-C.js";const p=({searchTerm:s,category:r,categories:t,onSearchChange:c,onCategoryChange:a,onSubmit:d})=>{const x=o=>{o.preventDefault(),d()};return e.jsx("form",{onSubmit:x,className:"bg-white p-4 rounded-lg shadow-md mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rechercher une marque ou un produit"}),e.jsx("input",{type:"text",id:"search",value:s,onChange:o=>c(o.target.value),placeholder:"Unilever, CocaCola, Nestle, Procter&Gamble ...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:"w-full md:w-auto px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Rechercher"})})]})})},v=({product:s,className:r=""})=>s?e.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden transition-all hover:shadow-lg flex flex-col h-full ${r}`,children:[e.jsxs("div",{className:"relative w-full h-48 bg-gray-100",children:[s.ban!==void 0&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.ban?e.jsx("div",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded flex items-center",children:e.jsx("span",{children:"Boycott"})}):e.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-90 px-2 py-1 rounded shadow",children:[e.jsx("img",{src:"https://badayli.com/static/media/verified.2047171bd61ad952e1f1f091f5b34cc9.svg",alt:"Verified",title:"Non boycotté",className:"w-4 h-4"}),e.jsx("span",{className:"text-xs text-gray-800",children:"Non boycotté"})]})}),s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-full object-contain p-4"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"Pas d'image disponible"})})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",title:s.article,children:s.article})}),e.jsx("div",{className:"mt-2 flex items-center justify-between",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.categorie})})]})]}):null,N=({products:s,loading:r,error:t,columns:c=3})=>r?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):t?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:t})})]})}):Array.isArray(s)?s.length===0?e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("svg",{className:"h-8 w-8 text-blue-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-sm text-blue-700",children:"Aucun produit trouvé. Essayez de modifier vos critères de recherche."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:s.map(a=>e.jsx(v,{product:a,className:"h-full"},a.id))}):(console.warn("⚠️ products n'est pas un tableau :",s),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Les données produits sont invalides ou incomplètes."})})]})})),y=()=>{const[s,r]=i.useState({searchTerm:"",category:"",products:[],loading:!1,error:null}),[t,c]=i.useState([]),[a,d]=i.useState(s.searchTerm);i.useEffect(()=>{if(s.products.length>0){const n=Array.from(new Set(s.products.map(l=>l.categorie)));c(n)}else c([])},[s.products]),i.useEffect(()=>{const n=setTimeout(()=>{d(s.searchTerm)},500);return()=>clearTimeout(n)},[s.searchTerm]),i.useEffect(()=>{(async()=>{if(!a){r(l=>({...l,products:[],loading:!1,error:null}));return}r(l=>({...l,loading:!0,error:null}));try{const l=await h(a);r(u=>({...u,products:Array.isArray(l)?l:[],loading:!1,error:null}))}catch{r(u=>({...u,error:"Une erreur est survenue lors de la recherche. Veuillez réessayer.",loading:!1}))}})()},[a]);const x=i.useCallback(n=>{r(l=>({...l,searchTerm:n}))},[]),o=i.useCallback(n=>{r(l=>({...l,category:n}))},[]),m=s.category?s.products.filter(n=>n.categorie===s.category):s.products??[];return{searchTerm:s.searchTerm,category:s.category,products:m,loading:s.loading,error:s.error,categories:t,setSearchTerm:x,setCategory:o,executeSearch:i.useCallback(()=>{d(s.searchTerm)},[s.searchTerm])}};function w(){const{searchTerm:s,category:r,products:t,loading:c,error:a,categories:d,setSearchTerm:x,setCategory:o,executeSearch:m}=y();return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(f,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-red-700 py-16 md:py-24",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:"Grandes Entreprises Internationales et Leurs Filiales"}),e.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Découvrez les marques que vous consommez et leurs liens avec les grandes entreprises internationales. Informez-vous pour faire des choix éclairés et responsables. 10 Entreprises possèdent 1500+ marques ..."})]})})}),e.jsx("section",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6",children:e.jsx(p,{searchTerm:s,category:r,categories:d,onSearchChange:x,onCategoryChange:o,onSubmit:m})}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 pb-12 sm:px-6",children:[c&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Recherche en cours..."})]}),a&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:"Une erreur est survenue lors de la recherche. Veuillez réessayer."})})]})}),!c&&!a&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Résultats de votre recherche"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," produit",t.length>1?"s":""," trouvé",t.length>1?"s":""]})]}),e.jsx(N,{products:t,loading:c,error:a})]}),!c&&!a&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucun résultat trouvé"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Essayez de modifier vos critères de recherche."})]})]})]}),e.jsx(b,{})]})}j(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(w,{})}));
