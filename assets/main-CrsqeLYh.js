import{u as g,j as e,c as N,T as v,a as w,r as i,s as S,D as T,H as C,M as L,F as k,b as A}from"./index-D682674A.js";const D=({searchTerm:s,category:r,categories:n,onSearchChange:o,onCategoryChange:c,onSubmit:x})=>{const{t:d}=g(),u=l=>{l.preventDefault(),x()};return e.jsx("form",{onSubmit:u,className:"bg-white p-4 rounded-lg shadow-md mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:d("search.label")}),e.jsx("input",{type:"text",id:"search",value:s,onChange:l=>o(l.target.value),placeholder:"Nutella, Coca-Cola, Nido, ...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:d("search.categoryLabel")}),e.jsxs("select",{id:"category",value:r,onChange:l=>c(l.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:d("search.category")}),(Array.isArray(n)?n:[]).map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:"w-full md:w-auto px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:d("search.button")})})]})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=N("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f=({status:s})=>s===!0?e.jsx(v,{className:"h-5 w-5 text-red-500"}):s===!1?e.jsx(w,{className:"h-5 w-5 text-green-500"}):e.jsx(R,{className:"h-5 w-5 text-orange-500"}),F=({alternatives:s})=>!s||s.length===0?null:e.jsxs("div",{className:"pl-4 mt-2 border-l-2 border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Alternatives"}),e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"w-12 h-12 flex-shrink-0",children:[e.jsx("a",{href:r.photo_url,target:"_blank",rel:"noopener noreferrer",children:r.photo_url&&e.jsx("img",{src:r.photo_url,alt:r.name,className:"w-full h-full object-cover rounded"})}),"   "]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[r.name,"-"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:r.categorie}),e.jsxs("span",{className:"font-medium",children:[r.prix,"Dh"]}),e.jsx("div",{className:"flex justify-between items-start",children:e.jsx(f,{status:!1})})]})]})]},r.id))})]}),P=({product:s})=>s?e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-all hover:shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsxs("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:[e.jsxs("div",{className:"relative w-full sm:w-1/3 lg:w-1/4",children:[s.ban&&e.jsx("div",{className:"absolute top-2 left-2 bg-red-600 text-white text-xs px-2 py-1 rounded z-10",children:"Boycott"}),s.ban===!1&&e.jsx("div",{className:"absolute top-2 left-2 text-white text-xs px-2 py-1 rounded z-10 flex items-center space-x-1 bg-transparent",children:e.jsx("img",{src:"https://badayli.com/static/media/verified.2047171bd61ad952e1f1f091f5b34cc9.svg",alt:"Verified",title:"Bien",className:"w-10 h-10"})})]}),s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-48 sm:h-full object-contain"}):e.jsx("div",{className:"w-full h-48 sm:h-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"No image"})})]}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.article}),e.jsx(f,{status:s.ban})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.categorie}),e.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[s.prix,"Dh"]})]}),s.alternatives&&s.alternatives.length>0&&e.jsx(F,{alternatives:s.alternatives})]})]})}):null,E=({products:s,loading:r,error:n})=>r?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):n?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{children:n})}):Array.isArray(s)?e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsx(P,{product:o},o.id))}):(console.warn("⚠️ products n'est pas un tableau :",s),e.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-8 rounded-md text-center",children:e.jsx("p",{children:"Les données produits sont invalides."})})),M=()=>{const[s,r]=i.useState({searchTerm:"",category:"",products:[],loading:!1,error:null}),[n,o]=i.useState([]),[c,x]=i.useState(s.searchTerm);i.useEffect(()=>{if(s.products.length>0){const a=Array.from(new Set(s.products.map(t=>t.categorie)));o(a)}else o([])},[s.products]),i.useEffect(()=>{const a=setTimeout(()=>{x(s.searchTerm)},500);return()=>clearTimeout(a)},[s.searchTerm]),i.useEffect(()=>{(async()=>{if(!c){r(t=>({...t,products:[],loading:!1,error:null}));return}r(t=>({...t,loading:!0,error:null}));try{const t=await S(c);r(m=>({...m,products:Array.isArray(t)?t:[],loading:!1,error:null}))}catch{r(m=>({...m,error:"Une erreur est survenue lors de la recherche. Veuillez réessayer.",loading:!1}))}})()},[c]);const d=i.useCallback(a=>{r(t=>({...t,searchTerm:a}))},[]),u=i.useCallback(a=>{r(t=>({...t,category:a}))},[]),l=s.category?s.products.filter(a=>a.categorie===s.category):s.products??[];return{searchTerm:s.searchTerm,category:s.category,products:l,loading:s.loading,error:s.error,categories:n,setSearchTerm:d,setCategory:u,executeSearch:i.useCallback(()=>{x(s.searchTerm)},[s.searchTerm])}};function z(){const{t:s,i18n:r}=g(),n=h=>{r.changeLanguage(h)},c=new URLSearchParams(window.location.search).get("lang")||"fr",x=()=>c.startsWith("en")?"Find the perfect product in Morocco in just a few clicks!":c.startsWith("ar")?"إن عجزت على نصرهم فلا تنفق على عدوهم":" Trouvez le produit idéal au Maroc en quelques clics!",d=()=>c.startsWith("en")?"6728 boycotted products, 2571 brands, and 5319 alternatives available.":c.startsWith("ar")?"ابحث عن المنتج المثالي في المغرب ببضع نقرات  6728 منتجًا مُقاطَعًا، 2571 علامة تجارية و5319 بديلًا متاحًا. ":" 6728 produits boycottés, 2571 marques et 5319 alternatives disponibles.";x(),d();const{searchTerm:u,category:l,products:a,loading:t,error:m,categories:b,setSearchTerm:p,setCategory:j,executeSearch:y}=M();return e.jsx(T,{children:e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(C,{}),e.jsxs("div",{className:"flex justify-end gap-2 p-4",children:[e.jsx("button",{onClick:()=>n("ar"),className:`px-3 py-1 rounded text-sm ${r.language==="ar"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"AR"}),e.jsx("button",{onClick:()=>n("fr"),className:`px-3 py-1 rounded text-sm ${r.language==="fr"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"FR"}),e.jsx("button",{onClick:()=>n("en"),className:`px-3 py-1 rounded text-sm ${r.language==="en"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"EN"})]}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6",children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 py-16 md:py-24",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:s("hero.title")}),e.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:s("hero.subtitle")})]})})}),e.jsx(D,{searchTerm:u,category:l,categories:b,onSearchChange:p,onCategoryChange:j,onSubmit:y}),!t&&!m&&a.length>0&&e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:s("search.results",{count:a.length})}),e.jsx(E,{products:a,loading:t,error:m}),!t&&!m&&a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:s("search.noResults.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s("search.noResults.message")})]})]}),e.jsx(k,{})]})})}A(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(z,{})}));
